{"ast":null,"code":"var _jsxFileName = \"E:\\\\Hackthon\\\\Masai Hackthon\\\\Anveshan Hackathon 2025\\\\Life-In-Weeks Timeline App\\\\life-in-weeks\\\\life-in-weeks\\\\frontend\\\\src\\\\components\\\\Timeline.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react'; // Removed unused useContext\nimport { useAuth } from '../context/AuthContext'; // Fixed import\nimport Week from './Week';\nimport EventForm from './EventForm';\nimport { fetchTimeline, createEvent } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Timeline() {\n  _s();\n  const {\n    currentUser\n  } = useAuth();\n  const [timeline, setTimeline] = useState([]);\n  const [selectedWeek, setSelectedWeek] = useState(null);\n  const [showEventForm, setShowEventForm] = useState(false);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (currentUser) {\n      loadTimeline();\n    }\n  }, [currentUser]);\n  const loadTimeline = async () => {\n    try {\n      console.log(\"Loading timeline...\");\n      const response = await getTimeline();\n      console.log(\"Timeline response:\", response);\n      const data = response.data;\n      console.log(\"Timeline data:\", data);\n\n      // Convert date strings to Date objects\n      const timelineWithDates = data.weeks.map(week => ({\n        ...week,\n        start_date: new Date(week.start_date),\n        end_date: new Date(week.end_date),\n        events: week.events.map(event => ({\n          ...event,\n          date: new Date(event.date)\n        }))\n      }));\n      setTimeline(timelineWithDates);\n      setLoading(false);\n    } catch (error) {\n      var _error$response;\n      console.error(\"Failed to load timeline\", error);\n      console.error(\"Error details:\", (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n      setError(\"Failed to load timeline. See console for details.\");\n      setLoading(false);\n    }\n  };\n  const handleWeekClick = week => {\n    setSelectedWeek(week);\n    setShowEventForm(true);\n  };\n  const handleAddEvent = async eventData => {\n    try {\n      await createEvent({\n        ...eventData,\n        date: selectedWeek.start_date.toISOString().split('T')[0]\n      });\n      loadTimeline();\n      setShowEventForm(false);\n    } catch (error) {\n      console.error(\"Failed to add event\", error);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading timeline...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 23\n  }, this);\n\n  // Group weeks by year\n  const years = {};\n  timeline.forEach(week => {\n    const year = week.start_date.getFullYear();\n    if (!years[year]) years[year] = [];\n    years[year].push(week);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"timeline-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"years-grid\",\n      children: Object.entries(years).map(([year, weeks]) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"year-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"year-label\",\n          children: year\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"weeks-container\",\n          children: weeks.map(week => /*#__PURE__*/_jsxDEV(Week, {\n            week: week,\n            onClick: () => handleWeekClick(week)\n          }, week.week_number, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)]\n      }, year, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), showEventForm && selectedWeek && /*#__PURE__*/_jsxDEV(EventForm, {\n      week: selectedWeek,\n      onSubmit: handleAddEvent,\n      onCancel: () => setShowEventForm(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s(Timeline, \"5Jv3DGyGLn6XO9e/lUVPe/t/AVE=\", false, function () {\n  return [useAuth];\n});\n_c = Timeline;\nvar _c;\n$RefreshReg$(_c, \"Timeline\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","Week","EventForm","fetchTimeline","createEvent","jsxDEV","_jsxDEV","Timeline","_s","currentUser","timeline","setTimeline","selectedWeek","setSelectedWeek","showEventForm","setShowEventForm","loading","setLoading","loadTimeline","console","log","response","getTimeline","data","timelineWithDates","weeks","map","week","start_date","Date","end_date","events","event","date","error","_error$response","setError","handleWeekClick","handleAddEvent","eventData","toISOString","split","children","fileName","_jsxFileName","lineNumber","columnNumber","years","forEach","year","getFullYear","push","className","Object","entries","onClick","week_number","onSubmit","onCancel","_c","$RefreshReg$"],"sources":["E:/Hackthon/Masai Hackthon/Anveshan Hackathon 2025/Life-In-Weeks Timeline App/life-in-weeks/life-in-weeks/frontend/src/components/Timeline.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'; // Removed unused useContext\r\nimport { useAuth } from '../context/AuthContext'; // Fixed import\r\nimport Week from './Week';\r\nimport EventForm from './EventForm';\r\nimport { fetchTimeline, createEvent } from '../services/api';\r\n\r\n\r\nexport default function Timeline() {\r\n  const { currentUser } = useAuth();\r\n  const [timeline, setTimeline] = useState([]);\r\n  const [selectedWeek, setSelectedWeek] = useState(null);\r\n  const [showEventForm, setShowEventForm] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      loadTimeline();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const loadTimeline = async () => {\r\n    try {\r\n      console.log(\"Loading timeline...\");\r\n\t  const response = await getTimeline();\r\n\t  console.log(\"Timeline response:\", response);\r\n    \r\n      const data = response.data;\r\n      console.log(\"Timeline data:\", data);\r\n      \r\n      // Convert date strings to Date objects\r\n      const timelineWithDates = data.weeks.map(week => ({\r\n        ...week,\r\n        start_date: new Date(week.start_date),\r\n        end_date: new Date(week.end_date),\r\n        events: week.events.map(event => ({\r\n          ...event,\r\n          date: new Date(event.date)\r\n        }))\r\n      }));\r\n      \r\n      setTimeline(timelineWithDates);\r\n      setLoading(false);\r\n    } catch (error) {\r\n\t\tconsole.error(\"Failed to load timeline\", error);\r\n\t\tconsole.error(\"Error details:\", error.response?.data);\r\n\t\tsetError(\"Failed to load timeline. See console for details.\");\r\n\t\tsetLoading(false);\r\n\t}\r\n  };\r\n\r\n  const handleWeekClick = (week) => {\r\n    setSelectedWeek(week);\r\n    setShowEventForm(true);\r\n  };\r\n\r\n  const handleAddEvent = async (eventData) => {\r\n    try {\r\n      await createEvent({\r\n        ...eventData,\r\n        date: selectedWeek.start_date.toISOString().split('T')[0]\r\n      });\r\n      loadTimeline();\r\n      setShowEventForm(false);\r\n    } catch (error) {\r\n      console.error(\"Failed to add event\", error);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading timeline...</div>;\r\n\r\n  // Group weeks by year\r\n  const years = {};\r\n  timeline.forEach(week => {\r\n    const year = week.start_date.getFullYear();\r\n    if (!years[year]) years[year] = [];\r\n    years[year].push(week);\r\n  });\r\n\r\n  return (\r\n    <div className=\"timeline-container\">\r\n      <div className=\"years-grid\">\r\n        {Object.entries(years).map(([year, weeks]) => (\r\n          <div key={year} className=\"year-row\">\r\n            <div className=\"year-label\">{year}</div>\r\n            <div className=\"weeks-container\">\r\n              {weeks.map(week => (\r\n                <Week \r\n                  key={week.week_number} \r\n                  week={week} \r\n                  onClick={() => handleWeekClick(week)}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {showEventForm && selectedWeek && (\r\n        <EventForm \r\n          week={selectedWeek}\r\n          onSubmit={handleAddEvent}\r\n          onCancel={() => setShowEventForm(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO,CAAC,CAAC;AACpD,SAASC,OAAO,QAAQ,wBAAwB,CAAC,CAAC;AAClD,OAAOC,IAAI,MAAM,QAAQ;AACzB,OAAOC,SAAS,MAAM,aAAa;AACnC,SAASC,aAAa,EAAEC,WAAW,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAG7D,eAAe,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EACjC,MAAM;IAAEC;EAAY,CAAC,GAAGT,OAAO,CAAC,CAAC;EACjC,MAAM,CAACU,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACc,YAAY,EAAEC,eAAe,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACgB,aAAa,EAAEC,gBAAgB,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACkB,OAAO,EAAEC,UAAU,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACd,IAAIU,WAAW,EAAE;MACfS,YAAY,CAAC,CAAC;IAChB;EACF,CAAC,EAAE,CAACT,WAAW,CAAC,CAAC;EAEjB,MAAMS,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACFC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;MACrC,MAAMC,QAAQ,GAAG,MAAMC,WAAW,CAAC,CAAC;MACpCH,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEC,QAAQ,CAAC;MAExC,MAAME,IAAI,GAAGF,QAAQ,CAACE,IAAI;MAC1BJ,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEG,IAAI,CAAC;;MAEnC;MACA,MAAMC,iBAAiB,GAAGD,IAAI,CAACE,KAAK,CAACC,GAAG,CAACC,IAAI,KAAK;QAChD,GAAGA,IAAI;QACPC,UAAU,EAAE,IAAIC,IAAI,CAACF,IAAI,CAACC,UAAU,CAAC;QACrCE,QAAQ,EAAE,IAAID,IAAI,CAACF,IAAI,CAACG,QAAQ,CAAC;QACjCC,MAAM,EAAEJ,IAAI,CAACI,MAAM,CAACL,GAAG,CAACM,KAAK,KAAK;UAChC,GAAGA,KAAK;UACRC,IAAI,EAAE,IAAIJ,IAAI,CAACG,KAAK,CAACC,IAAI;QAC3B,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;MAEHtB,WAAW,CAACa,iBAAiB,CAAC;MAC9BP,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC,OAAOiB,KAAK,EAAE;MAAA,IAAAC,eAAA;MAClBhB,OAAO,CAACe,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/Cf,OAAO,CAACe,KAAK,CAAC,gBAAgB,GAAAC,eAAA,GAAED,KAAK,CAACb,QAAQ,cAAAc,eAAA,uBAAdA,eAAA,CAAgBZ,IAAI,CAAC;MACrDa,QAAQ,CAAC,mDAAmD,CAAC;MAC7DnB,UAAU,CAAC,KAAK,CAAC;IAClB;EACC,CAAC;EAED,MAAMoB,eAAe,GAAIV,IAAI,IAAK;IAChCd,eAAe,CAACc,IAAI,CAAC;IACrBZ,gBAAgB,CAAC,IAAI,CAAC;EACxB,CAAC;EAED,MAAMuB,cAAc,GAAG,MAAOC,SAAS,IAAK;IAC1C,IAAI;MACF,MAAMnC,WAAW,CAAC;QAChB,GAAGmC,SAAS;QACZN,IAAI,EAAErB,YAAY,CAACgB,UAAU,CAACY,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;MAC1D,CAAC,CAAC;MACFvB,YAAY,CAAC,CAAC;MACdH,gBAAgB,CAAC,KAAK,CAAC;IACzB,CAAC,CAAC,OAAOmB,KAAK,EAAE;MACdf,OAAO,CAACe,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC7C;EACF,CAAC;EAED,IAAIlB,OAAO,EAAE,oBAAOV,OAAA;IAAAoC,QAAA,EAAK;EAAmB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;;EAElD;EACA,MAAMC,KAAK,GAAG,CAAC,CAAC;EAChBrC,QAAQ,CAACsC,OAAO,CAACrB,IAAI,IAAI;IACvB,MAAMsB,IAAI,GAAGtB,IAAI,CAACC,UAAU,CAACsB,WAAW,CAAC,CAAC;IAC1C,IAAI,CAACH,KAAK,CAACE,IAAI,CAAC,EAAEF,KAAK,CAACE,IAAI,CAAC,GAAG,EAAE;IAClCF,KAAK,CAACE,IAAI,CAAC,CAACE,IAAI,CAACxB,IAAI,CAAC;EACxB,CAAC,CAAC;EAEF,oBACErB,OAAA;IAAK8C,SAAS,EAAC,oBAAoB;IAAAV,QAAA,gBACjCpC,OAAA;MAAK8C,SAAS,EAAC,YAAY;MAAAV,QAAA,EACxBW,MAAM,CAACC,OAAO,CAACP,KAAK,CAAC,CAACrB,GAAG,CAAC,CAAC,CAACuB,IAAI,EAAExB,KAAK,CAAC,kBACvCnB,OAAA;QAAgB8C,SAAS,EAAC,UAAU;QAAAV,QAAA,gBAClCpC,OAAA;UAAK8C,SAAS,EAAC,YAAY;UAAAV,QAAA,EAAEO;QAAI;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACxCxC,OAAA;UAAK8C,SAAS,EAAC,iBAAiB;UAAAV,QAAA,EAC7BjB,KAAK,CAACC,GAAG,CAACC,IAAI,iBACbrB,OAAA,CAACL,IAAI;YAEH0B,IAAI,EAAEA,IAAK;YACX4B,OAAO,EAAEA,CAAA,KAAMlB,eAAe,CAACV,IAAI;UAAE,GAFhCA,IAAI,CAAC6B,WAAW;YAAAb,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAGtB,CACF;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA,GAVEG,IAAI;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAWT,CACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,EAELhC,aAAa,IAAIF,YAAY,iBAC5BN,OAAA,CAACJ,SAAS;MACRyB,IAAI,EAAEf,YAAa;MACnB6C,QAAQ,EAAEnB,cAAe;MACzBoB,QAAQ,EAAEA,CAAA,KAAM3C,gBAAgB,CAAC,KAAK;IAAE;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzC,CACF;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAACtC,EAAA,CAnGuBD,QAAQ;EAAA,QACNP,OAAO;AAAA;AAAA2D,EAAA,GADTpD,QAAQ;AAAA,IAAAoD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}