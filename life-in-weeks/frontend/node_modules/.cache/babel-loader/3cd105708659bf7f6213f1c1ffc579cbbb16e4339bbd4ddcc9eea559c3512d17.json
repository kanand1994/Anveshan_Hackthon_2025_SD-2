{"ast":null,"code":"var _jsxFileName = \"E:\\\\Hackthon\\\\Masai Hackthon\\\\Anveshan Hackathon 2025\\\\Life-In-Weeks Timeline App\\\\life-in-weeks\\\\life-in-weeks\\\\frontend\\\\src\\\\components\\\\Timeline.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react'; // Removed unused useContext\nimport { useAuth } from '../context/AuthContext'; // Fixed import\nimport Week from './Week';\nimport EventForm from './EventForm';\nimport { fetchTimeline, createEvent } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Timeline() {\n  _s();\n  const {\n    currentUser\n  } = useAuth();\n  const [timeline, setTimeline] = useState([]);\n  const [selectedWeek, setSelectedWeek] = useState(null);\n  const [showEventForm, setShowEventForm] = useState(false);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (currentUser) {\n      loadTimeline();\n    }\n  }, [currentUser]);\n  const loadTimeline = async () => {\n    try {\n      const response = await getTimeline();\n      const data = response.data;\n\n      // Convert date strings to Date objects\n      const timelineWithDates = data.weeks.map(week => ({\n        ...week,\n        start_date: new Date(week.start_date),\n        end_date: new Date(week.end_date),\n        events: week.events.map(event => ({\n          ...event,\n          date: new Date(event.date)\n        }))\n      }));\n      setTimeline(timelineWithDates);\n      setLoading(false);\n    } catch (error) {\n      console.error(\"Failed to load timeline\", error);\n    }\n  };\n  const handleWeekClick = week => {\n    setSelectedWeek(week);\n    setShowEventForm(true);\n  };\n  const handleAddEvent = async eventData => {\n    try {\n      await createEvent({\n        ...eventData,\n        date: selectedWeek.start_date.toISOString().split('T')[0]\n      });\n      loadTimeline();\n      setShowEventForm(false);\n    } catch (error) {\n      console.error(\"Failed to add event\", error);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading timeline...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 23\n  }, this);\n\n  // Group weeks by year\n  const years = {};\n  timeline.forEach(week => {\n    const year = week.start_date.getFullYear();\n    if (!years[year]) years[year] = [];\n    years[year].push(week);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"timeline-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"years-grid\",\n      children: Object.entries(years).map(([year, weeks]) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"year-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"year-label\",\n          children: year\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"weeks-container\",\n          children: weeks.map(week => /*#__PURE__*/_jsxDEV(Week, {\n            week: week,\n            onClick: () => handleWeekClick(week)\n          }, week.week_number, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)]\n      }, year, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), showEventForm && selectedWeek && /*#__PURE__*/_jsxDEV(EventForm, {\n      week: selectedWeek,\n      onSubmit: handleAddEvent,\n      onCancel: () => setShowEventForm(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(Timeline, \"5Jv3DGyGLn6XO9e/lUVPe/t/AVE=\", false, function () {\n  return [useAuth];\n});\n_c = Timeline;\nvar _c;\n$RefreshReg$(_c, \"Timeline\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","Week","EventForm","fetchTimeline","createEvent","jsxDEV","_jsxDEV","Timeline","_s","currentUser","timeline","setTimeline","selectedWeek","setSelectedWeek","showEventForm","setShowEventForm","loading","setLoading","loadTimeline","response","getTimeline","data","timelineWithDates","weeks","map","week","start_date","Date","end_date","events","event","date","error","console","handleWeekClick","handleAddEvent","eventData","toISOString","split","children","fileName","_jsxFileName","lineNumber","columnNumber","years","forEach","year","getFullYear","push","className","Object","entries","onClick","week_number","onSubmit","onCancel","_c","$RefreshReg$"],"sources":["E:/Hackthon/Masai Hackthon/Anveshan Hackathon 2025/Life-In-Weeks Timeline App/life-in-weeks/life-in-weeks/frontend/src/components/Timeline.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'; // Removed unused useContext\r\nimport { useAuth } from '../context/AuthContext'; // Fixed import\r\nimport Week from './Week';\r\nimport EventForm from './EventForm';\r\nimport { fetchTimeline, createEvent } from '../services/api';\r\n\r\n\r\nexport default function Timeline() {\r\n  const { currentUser } = useAuth();\r\n  const [timeline, setTimeline] = useState([]);\r\n  const [selectedWeek, setSelectedWeek] = useState(null);\r\n  const [showEventForm, setShowEventForm] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      loadTimeline();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const loadTimeline = async () => {\r\n    try {\r\n      const response = await getTimeline();\r\n      const data = response.data;\r\n      \r\n      // Convert date strings to Date objects\r\n      const timelineWithDates = data.weeks.map(week => ({\r\n        ...week,\r\n        start_date: new Date(week.start_date),\r\n        end_date: new Date(week.end_date),\r\n        events: week.events.map(event => ({\r\n          ...event,\r\n          date: new Date(event.date)\r\n        }))\r\n      }));\r\n      \r\n      setTimeline(timelineWithDates);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error(\"Failed to load timeline\", error);\r\n    }\r\n  };\r\n\r\n  const handleWeekClick = (week) => {\r\n    setSelectedWeek(week);\r\n    setShowEventForm(true);\r\n  };\r\n\r\n  const handleAddEvent = async (eventData) => {\r\n    try {\r\n      await createEvent({\r\n        ...eventData,\r\n        date: selectedWeek.start_date.toISOString().split('T')[0]\r\n      });\r\n      loadTimeline();\r\n      setShowEventForm(false);\r\n    } catch (error) {\r\n      console.error(\"Failed to add event\", error);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading timeline...</div>;\r\n\r\n  // Group weeks by year\r\n  const years = {};\r\n  timeline.forEach(week => {\r\n    const year = week.start_date.getFullYear();\r\n    if (!years[year]) years[year] = [];\r\n    years[year].push(week);\r\n  });\r\n\r\n  return (\r\n    <div className=\"timeline-container\">\r\n      <div className=\"years-grid\">\r\n        {Object.entries(years).map(([year, weeks]) => (\r\n          <div key={year} className=\"year-row\">\r\n            <div className=\"year-label\">{year}</div>\r\n            <div className=\"weeks-container\">\r\n              {weeks.map(week => (\r\n                <Week \r\n                  key={week.week_number} \r\n                  week={week} \r\n                  onClick={() => handleWeekClick(week)}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {showEventForm && selectedWeek && (\r\n        <EventForm \r\n          week={selectedWeek}\r\n          onSubmit={handleAddEvent}\r\n          onCancel={() => setShowEventForm(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}