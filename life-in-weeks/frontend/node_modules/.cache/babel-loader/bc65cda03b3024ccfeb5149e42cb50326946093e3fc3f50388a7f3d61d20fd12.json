{"ast":null,"code":"var _jsxFileName = \"E:\\\\Hackthon\\\\Masai Hackthon\\\\Anveshan Hackathon 2025\\\\Life-In-Weeks Timeline App\\\\life-in-weeks\\\\life-in-weeks\\\\frontend\\\\src\\\\components\\\\Timeline.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Week from './Week';\nimport EventForm from './EventForm';\nimport { getTimeline, createEvent } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Timeline() {\n  _s();\n  const {\n    currentUser\n  } = useAuth();\n  const [timeline, setTimeline] = useState([]);\n  const [selectedWeek, setSelectedWeek] = useState(null);\n  const [showEventForm, setShowEventForm] = useState(false);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (currentUser) {\n      loadTimeline();\n    }\n  }, [currentUser]);\n  const loadTimeline = async () => {\n    try {\n      const response = await getTimeline();\n      const data = response.data;\n\n      // Convert date strings to Date objects\n      const timelineWithDates = data.weeks.map(week => ({\n        ...week,\n        start_date: new Date(week.start_date),\n        end_date: new Date(week.end_date),\n        events: week.events.map(event => ({\n          ...event,\n          date: new Date(event.date)\n        }))\n      }));\n      setTimeline(timelineWithDates);\n      setLoading(false);\n    } catch (error) {\n      console.error(\"Failed to load timeline\", error);\n    }\n  };\n  const handleWeekClick = week => {\n    setSelectedWeek(week);\n    setShowEventForm(true);\n  };\n  const handleAddEvent = async eventData => {\n    try {\n      await createEvent({\n        ...eventData,\n        date: selectedWeek.start_date.toISOString().split('T')[0]\n      });\n      loadTimeline();\n      setShowEventForm(false);\n    } catch (error) {\n      console.error(\"Failed to add event\", error);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading timeline...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 23\n  }, this);\n\n  // Group weeks by year\n  const years = {};\n  timeline.forEach(week => {\n    const year = week.start_date.getFullYear();\n    if (!years[year]) years[year] = [];\n    years[year].push(week);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"timeline-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"years-grid\",\n      children: Object.entries(years).map(([year, weeks]) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"year-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"year-label\",\n          children: year\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"weeks-container\",\n          children: weeks.map(week => /*#__PURE__*/_jsxDEV(Week, {\n            week: week,\n            onClick: () => handleWeekClick(week)\n          }, week.week_number, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this)]\n      }, year, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), showEventForm && selectedWeek && /*#__PURE__*/_jsxDEV(EventForm, {\n      week: selectedWeek,\n      onSubmit: handleAddEvent,\n      onCancel: () => setShowEventForm(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(Timeline, \"5Jv3DGyGLn6XO9e/lUVPe/t/AVE=\", false, function () {\n  return [useAuth];\n});\n_c = Timeline;\nvar _c;\n$RefreshReg$(_c, \"Timeline\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useAuth","Week","EventForm","getTimeline","createEvent","jsxDEV","_jsxDEV","Timeline","_s","currentUser","timeline","setTimeline","selectedWeek","setSelectedWeek","showEventForm","setShowEventForm","loading","setLoading","loadTimeline","response","data","timelineWithDates","weeks","map","week","start_date","Date","end_date","events","event","date","error","console","handleWeekClick","handleAddEvent","eventData","toISOString","split","children","fileName","_jsxFileName","lineNumber","columnNumber","years","forEach","year","getFullYear","push","className","Object","entries","onClick","week_number","onSubmit","onCancel","_c","$RefreshReg$"],"sources":["E:/Hackthon/Masai Hackthon/Anveshan Hackathon 2025/Life-In-Weeks Timeline App/life-in-weeks/life-in-weeks/frontend/src/components/Timeline.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport Week from './Week';\r\nimport EventForm from './EventForm';\r\nimport { getTimeline, createEvent } from '../services/api';\r\n\r\nexport default function Timeline() {\r\n  const { currentUser } = useAuth();\r\n  const [timeline, setTimeline] = useState([]);\r\n  const [selectedWeek, setSelectedWeek] = useState(null);\r\n  const [showEventForm, setShowEventForm] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      loadTimeline();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const loadTimeline = async () => {\r\n    try {\r\n      const response = await getTimeline();\r\n      const data = response.data;\r\n      \r\n      // Convert date strings to Date objects\r\n      const timelineWithDates = data.weeks.map(week => ({\r\n        ...week,\r\n        start_date: new Date(week.start_date),\r\n        end_date: new Date(week.end_date),\r\n        events: week.events.map(event => ({\r\n          ...event,\r\n          date: new Date(event.date)\r\n        }))\r\n      }));\r\n      \r\n      setTimeline(timelineWithDates);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error(\"Failed to load timeline\", error);\r\n    }\r\n  };\r\n\r\n  const handleWeekClick = (week) => {\r\n    setSelectedWeek(week);\r\n    setShowEventForm(true);\r\n  };\r\n\r\n  const handleAddEvent = async (eventData) => {\r\n    try {\r\n      await createEvent({\r\n        ...eventData,\r\n        date: selectedWeek.start_date.toISOString().split('T')[0]\r\n      });\r\n      loadTimeline();\r\n      setShowEventForm(false);\r\n    } catch (error) {\r\n      console.error(\"Failed to add event\", error);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading timeline...</div>;\r\n\r\n  // Group weeks by year\r\n  const years = {};\r\n  timeline.forEach(week => {\r\n    const year = week.start_date.getFullYear();\r\n    if (!years[year]) years[year] = [];\r\n    years[year].push(week);\r\n  });\r\n\r\n  return (\r\n    <div className=\"timeline-container\">\r\n      <div className=\"years-grid\">\r\n        {Object.entries(years).map(([year, weeks]) => (\r\n          <div key={year} className=\"year-row\">\r\n            <div className=\"year-label\">{year}</div>\r\n            <div className=\"weeks-container\">\r\n              {weeks.map(week => (\r\n                <Week \r\n                  key={week.week_number} \r\n                  week={week} \r\n                  onClick={() => handleWeekClick(week)}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {showEventForm && selectedWeek && (\r\n        <EventForm \r\n          week={selectedWeek}\r\n          onSubmit={handleAddEvent}\r\n          onCancel={() => setShowEventForm(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}